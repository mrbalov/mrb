AGENTS for Mr. B. Tech Blog

This repository is a Jekyll-based blog. This document describes the important "agents" (human and automated processes) that interact with this codebase, how they work, and recommended additions to automate routine tasks.

- Purpose: help maintainers and contributors quickly understand what automated or semi-automated roles exist or should exist and how to run them.

Core agents (what already exists)
- Human / Local Developer
  - Role: author, edit posts, update layouts/styles, run the site locally for preview.
  - Key files: `_posts/` (content), `_layouts/` (templates), `_includes/` (partials), `_sass/` (styles).
  - Typical commands:
    ```bash
    bundle install            # install Ruby gems defined in Gemfile
    bundle exec jekyll serve --livereload   # run local dev server
    bundle exec jekyll build                # build static site into _site/
    ```
  - Notes: Ruby version is pinned in `.ruby-version` and gems are managed with `Gemfile`.

- Jekyll Build Agent (static site generator)
  - Role: converts markdown + templates into the static site. Uses plugins defined in `Gemfile` and `_config.yml`.
  - Config: see `_config.yml` for site-wide settings and plugins (`jekyll-feed`, `jekyll-sitemap`, `jekyll-toc`).
  - Invocation: `bundle exec jekyll build` (or `bundle exec jekyll serve`).

- Search Index / Front-end Search
  - Role: front-end search uses `assets/search.json` and `assets/js/search.min.js` for client-side lookup.
  - Current state: `assets/search.json` exists in the repo (pre-generated). There is no script in the repo that rebuilds it automaticallyâ€”it's commonly produced during the Jekyll build or via a custom script.
  - How to regenerate (suggested manual approach): run `bundle exec jekyll build` and then run a small script that walks `_posts/` and outputs a JSON index to `assets/search.json`. Consider adding a Rake task (see "Recommended agents to add").

- Image / Assets
  - Role: static images and optimized assets are stored under `assets/` (example: `assets/blog/...` and `assets/img/raw/`).
  - Current state: optimized webp images already exist in `assets/blog/...` alongside some raw images in `assets/img/raw/`.
  - Manual workflow: maintainers optimize images locally and commit. No automated optimizer is present.

- Deploy Agent (manual / Vercel compatible)
  - Role: deploy the built site to a hosting provider. There is a `now.json` file which implies Vercel (formerly Now) configuration.
  - Typical invocation (if using Vercel): `vercel --prod` or using the Vercel web dashboard / Git integration.
  - Notes: Check `now.json` to confirm build/deploy options before automated deploy.

Observability / meta
- Sitemap and feed are generated by `jekyll-sitemap` and `jekyll-feed` plugins configured in `Gemfile` and `_config.yml`.

How to add content (quick recipe)
1. Create a new post: `_posts/YYYY-MM-DD-your-title.md` with YAML front matter (title, description, tags, layout if different).
2. Add images to `assets/blog/<slug>/` and reference them from the post.
3. Run `bundle exec jekyll serve` locally to preview.
4. Commit and push; if deployment is linked to Vercel/GitHub Actions, it will deploy automatically (if configured).

Where to look (quick references)
- Site settings: `_config.yml`
- Gems / build tooling: `Gemfile`
- Deployment config: `now.json`
- Layout used for posts: `_layouts/post.html`
- Example post: `_posts/2025-05-07-composable-frontend-explained-how-to-build-a-future-proof-ui-architecture.md`

Recommended agents to add (small automations that pay off)
1. Image optimizer agent
   - Purpose: automatically generate WebP and appropriately sized images on commit or build.
   - Implementation ideas: add a GitHub Action or local `rake` task using `image_optim` (Ruby) or `sharp` (Node) to produce `assets/blog/.../*.webp` and place them alongside originals.

2. Search index builder
   - Purpose: regenerate `assets/search.json` from `_posts/` automatically during build.
   - Implementation ideas: a small Ruby script or Jekyll plugin (or Rake task) that parses front matter and outputs a compact JSON used by `assets/js/search.min.js`.

3. Link checker / SEO validator
   - Purpose: run a link-check and basic SEO/accessibility checks on the generated `_site/` before deployment.
   - Implementation ideas: CI job using `lychee` (link checker), `pa11y` (accessibility) or `lighthouse-ci`.

4. CI build + deploy pipeline
   - Purpose: provide reproducible builds and automated deploys (and optional previews).
   - Implementation ideas: GitHub Actions workflow that runs `bundle install` and `bundle exec jekyll build`, runs the link checker, and triggers `vercel` or uploads artifacts to your host.

Small sample scripts you can add
- Rakefile sample (generate search.json and build): add a `Rakefile` with tasks:

```ruby
# Rakefile (example)
require 'json'
require 'yaml'

# simple task to build a search index for posts
task :search do
  entries = Dir.glob('_posts/*.md').map do |path|
    fm = File.read(path).split(/^---\s*$/)[1] rescue nil
    meta = fm ? YAML.load(fm) : {}
    {"title" => meta['title'], "url" => meta['permalink'] || "/blog/" + File.basename(path).sub(/\d{4}-\d{2}-\d{2}-/, '').sub(/\.md$/, ''), "description" => meta['description']}
  end
  File.write('assets/search.json', JSON.pretty_generate(entries))
end

# usage: rake search && bundle exec jekyll build
```

Notes and risks
- This repo contains the full static artifacts (optimized webp images and `assets/search.json`). If you add automation, make sure generated artifacts are committed or ignored consistently.
- Plugins listed in `Gemfile` (jekyll-feed, jekyll-sitemap, jekyll-toc) require the gems to be installed via Bundler to work locally and in CI.
